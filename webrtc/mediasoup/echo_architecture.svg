<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景 -->
  <rect width="800" height="600" fill="#f8f9fa" />
  
  <!-- 标题 -->
  <text x="400" y="30" font-family="Arial" font-size="24" text-anchor="middle" font-weight="bold">mediasoup-rust Echo 示例架构</text>
  
  <!-- 客户端 -->
  <rect x="50" y="80" width="200" height="440" rx="10" ry="10" fill="#e6f7ff" stroke="#1890ff" stroke-width="2" />
  <text x="150" y="110" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">浏览器客户端</text>
  
  <!-- 客户端组件 -->
  <rect x="70" y="130" width="160" height="60" rx="5" ry="5" fill="#ffffff" stroke="#1890ff" stroke-width="1" />
  <text x="150" y="165" font-family="Arial" font-size="14" text-anchor="middle">WebSocket 连接</text>
  
  <rect x="70" y="210" width="160" height="60" rx="5" ry="5" fill="#ffffff" stroke="#1890ff" stroke-width="1" />
  <text x="150" y="245" font-family="Arial" font-size="14" text-anchor="middle">Producer Transport</text>
  
  <rect x="70" y="290" width="160" height="60" rx="5" ry="5" fill="#ffffff" stroke="#1890ff" stroke-width="1" />
  <text x="150" y="325" font-family="Arial" font-size="14" text-anchor="middle">Consumer Transport</text>
  
  <rect x="70" y="370" width="160" height="60" rx="5" ry="5" fill="#ffffff" stroke="#1890ff" stroke-width="1" />
  <text x="150" y="405" font-family="Arial" font-size="14" text-anchor="middle">本地媒体流</text>
  
  <rect x="70" y="450" width="160" height="60" rx="5" ry="5" fill="#ffffff" stroke="#1890ff" stroke-width="1" />
  <text x="150" y="485" font-family="Arial" font-size="14" text-anchor="middle">远程媒体流</text>
  
  <!-- 服务器端 -->
  <rect x="550" y="80" width="200" height="440" rx="10" ry="10" fill="#f6ffed" stroke="#52c41a" stroke-width="2" />
  <text x="650" y="110" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">Rust 服务器</text>
  
  <!-- 服务器组件 -->
  <rect x="570" y="130" width="160" height="60" rx="5" ry="5" fill="#ffffff" stroke="#52c41a" stroke-width="1" />
  <text x="650" y="165" font-family="Arial" font-size="14" text-anchor="middle">WorkerManager</text>
  
  <rect x="570" y="210" width="160" height="60" rx="5" ry="5" fill="#ffffff" stroke="#52c41a" stroke-width="1" />
  <text x="650" y="245" font-family="Arial" font-size="14" text-anchor="middle">Router</text>
  
  <rect x="570" y="290" width="160" height="60" rx="5" ry="5" fill="#ffffff" stroke="#52c41a" stroke-width="1" />
  <text x="650" y="325" font-family="Arial" font-size="14" text-anchor="middle">WebRTC Transports</text>
  
  <rect x="570" y="370" width="160" height="60" rx="5" ry="5" fill="#ffffff" stroke="#52c41a" stroke-width="1" />
  <text x="650" y="405" font-family="Arial" font-size="14" text-anchor="middle">Producer</text>
  
  <rect x="570" y="450" width="160" height="60" rx="5" ry="5" fill="#ffffff" stroke="#52c41a" stroke-width="1" />
  <text x="650" y="485" font-family="Arial" font-size="14" text-anchor="middle">Consumer</text>
  
  <!-- 中间通信流程 -->
  <rect x="300" y="80" width="200" height="440" rx="10" ry="10" fill="#fff7e6" stroke="#fa8c16" stroke-width="2" />
  <text x="400" y="110" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">通信流程</text>
  
  <!-- 通信步骤 -->
  <rect x="320" y="130" width="160" height="40" rx="5" ry="5" fill="#ffffff" stroke="#fa8c16" stroke-width="1" />
  <text x="400" y="155" font-family="Arial" font-size="12" text-anchor="middle">1. WebSocket 连接建立</text>
  
  <rect x="320" y="180" width="160" height="40" rx="5" ry="5" fill="#ffffff" stroke="#fa8c16" stroke-width="1" />
  <text x="400" y="205" font-family="Arial" font-size="12" text-anchor="middle">2. 初始化 RTP 能力</text>
  
  <rect x="320" y="230" width="160" height="40" rx="5" ry="5" fill="#ffffff" stroke="#fa8c16" stroke-width="1" />
  <text x="400" y="255" font-family="Arial" font-size="12" text-anchor="middle">3. 连接 Producer Transport</text>
  
  <rect x="320" y="280" width="160" height="40" rx="5" ry="5" fill="#ffffff" stroke="#fa8c16" stroke-width="1" />
  <text x="400" y="305" font-family="Arial" font-size="12" text-anchor="middle">4. 创建 Producer</text>
  
  <rect x="320" y="330" width="160" height="40" rx="5" ry="5" fill="#ffffff" stroke="#fa8c16" stroke-width="1" />
  <text x="400" y="355" font-family="Arial" font-size="12" text-anchor="middle">5. 连接 Consumer Transport</text>
  
  <rect x="320" y="380" width="160" height="40" rx="5" ry="5" fill="#ffffff" stroke="#fa8c16" stroke-width="1" />
  <text x="400" y="405" font-family="Arial" font-size="12" text-anchor="middle">6. 创建 Consumer</text>
  
  <rect x="320" y="430" width="160" height="40" rx="5" ry="5" fill="#ffffff" stroke="#fa8c16" stroke-width="1" />
  <text x="400" y="455" font-family="Arial" font-size="12" text-anchor="middle">7. 恢复 Consumer</text>
  
  <rect x="320" y="480" width="160" height="40" rx="5" ry="5" fill="#ffffff" stroke="#fa8c16" stroke-width="1" />
  <text x="400" y="505" font-family="Arial" font-size="12" text-anchor="middle">8. 媒体回显</text>
  
  <!-- 连接线 -->
  <!-- WebSocket 连接 -->
  <line x1="230" y1="160" x2="320" y2="160" stroke="#1890ff" stroke-width="2" />
  <line x1="480" y1="160" x2="570" y2="160" stroke="#52c41a" stroke-width="2" />
  
  <!-- 媒体流向 -->
  <path d="M 230 245 L 275 245 L 275 305 L 320 305" stroke="#fa8c16" stroke-width="2" fill="none" stroke-dasharray="5,3" />
  <path d="M 480 305 L 525 305 L 525 245 L 570 245" stroke="#fa8c16" stroke-width="2" fill="none" stroke-dasharray="5,3" />
  
  <path d="M 570 405 L 525 405 L 525 455 L 480 455" stroke="#52c41a" stroke-width="2" fill="none" stroke-dasharray="5,3" />
  <path d="M 320 455 L 275 455 L 275 405 L 230 405" stroke="#1890ff" stroke-width="2" fill="none" stroke-dasharray="5,3" />
  
  <!-- 图例 -->
  <rect x="50" y="540" width="15" height="15" fill="#e6f7ff" stroke="#1890ff" stroke-width="1" />
  <text x="75" y="553" font-family="Arial" font-size="12">客户端组件</text>
  
  <rect x="180" y="540" width="15" height="15" fill="#f6ffed" stroke="#52c41a" stroke-width="1" />
  <text x="205" y="553" font-family="Arial" font-size="12">服务器组件</text>
  
  <rect x="310" y="540" width="15" height="15" fill="#fff7e6" stroke="#fa8c16" stroke-width="1" />
  <text x="335" y="553" font-family="Arial" font-size="12">通信流程</text>
  
  <line x1="440" y1="547" x2="470" y2="547" stroke="#1890ff" stroke-width="2" />
  <text x="480" y="553" font-family="Arial" font-size="12">WebSocket 消息</text>
  
  <line x1="590" y1="547" x2="620" y2="547" stroke="#fa8c16" stroke-width="2" stroke-dasharray="5,3" />
  <text x="630" y="553" font-family="Arial" font-size="12">媒体流</text>
</svg>